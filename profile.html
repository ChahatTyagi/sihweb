<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Samadhan Kendra</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-handshake"></i>
                <span>Samadhan Kendra</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="index.html#report" class="nav-link">Report Issue</a></li>
                <li><a href="index.html#issues" class="nav-link">View Issues</a></li>
                <li><a href="index.html#leaderboard" class="nav-link">Leaderboard</a></li>
                <li><a href="index.html#about" class="nav-link">About</a></li>
            </ul>
            <div class="nav-user">
                <div class="user-points">
                    <i class="fas fa-star"></i>
                    <span id="navUserPoints">1,250</span>
                </div>
                <div class="user-avatar" onclick="toggleProfileMenu()">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-dropdown" id="profileDropdown">
                    <a href="profile.html"><i class="fas fa-user"></i> Profile</a>
                    <a href="index.html#leaderboard"><i class="fas fa-trophy"></i> Leaderboard</a>
                    <a href="rewards-program.html"><i class="fas fa-gift"></i> Rewards</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Profile Section -->
    <section class="profile-section">
        <div class="container">
            <div class="profile-header">
                <div class="profile-avatar">
                    <i class="fas fa-user-circle"></i>
                    <button class="edit-avatar" onclick="editAvatar()">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
                <div class="profile-info">
                    <h1 id="userFullName">Rajesh Kumar</h1>
                    <p id="userCity">Mumbai, Maharashtra</p>
                    <div class="profile-stats">
                        <div class="stat">
                            <span class="stat-number" id="userPoints">1,250</span>
                            <span class="stat-label">Points</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="userIssues">15</span>
                            <span class="stat-label">Issues Reported</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="userRank">#3</span>
                            <span class="stat-label">City Rank</span>
                        </div>
                    </div>
                </div>
                <div class="profile-actions">
                    <button class="btn btn-secondary" onclick="editProfile()">
                        <i class="fas fa-edit"></i>
                        Edit Profile
                    </button>
                    <button class="btn btn-primary" onclick="reportNewIssue()">
                        <i class="fas fa-plus"></i>
                        Report Issue
                    </button>
                </div>
            </div>

            <div class="profile-content">
                <div class="profile-tabs">
                    <button class="tab-btn active" data-tab="overview">Overview</button>
                    <button class="tab-btn" data-tab="issues">My Issues</button>
                    <button class="tab-btn" data-tab="rewards">Rewards</button>
                    <button class="tab-btn" data-tab="settings">Settings</button>
                </div>

                <!-- Overview Tab -->
                <div class="tab-content active" id="overview">
                    <div class="overview-grid">
                        <div class="overview-card">
                            <h3>Recent Activity</h3>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <i class="fas fa-flag text-success"></i>
                                    <div class="activity-content">
                                        <p>Reported new issue: Water pipeline burst</p>
                                        <small>2 hours ago</small>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <i class="fas fa-thumbs-up text-primary"></i>
                                    <div class="activity-content">
                                        <p>Upvoted issue: Street light not working</p>
                                        <small>1 day ago</small>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <i class="fas fa-trophy text-warning"></i>
                                    <div class="activity-content">
                                        <p>Earned 25 points for new report</p>
                                        <small>2 days ago</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="overview-card">
                            <h3>Achievements</h3>
                            <div class="achievements-grid">
                                <div class="achievement">
                                    <i class="fas fa-medal text-warning"></i>
                                    <h4>First Report</h4>
                                    <p>Reported your first civic issue</p>
                                </div>
                                <div class="achievement">
                                    <i class="fas fa-star text-primary"></i>
                                    <h4>Community Helper</h4>
                                    <p>Reported 10+ issues</p>
                                </div>
                                <div class="achievement">
                                    <i class="fas fa-crown text-success"></i>
                                    <h4>Top Contributor</h4>
                                    <p>Reached top 10 in city rankings</p>
                                </div>
                            </div>
                        </div>

                        <div class="overview-card">
                            <h3>Quick Actions</h3>
                            <div class="quick-actions">
                                <button class="btn btn-outline" onclick="reportNewIssue()">
                                    <i class="fas fa-flag"></i>
                                    Report Issue
                                </button>
                                <button class="btn btn-outline" onclick="viewLeaderboard()">
                                    <i class="fas fa-trophy"></i>
                                    View Rankings
                                </button>
                                <button class="btn btn-outline" onclick="redeemRewards()">
                                    <i class="fas fa-gift"></i>
                                    Redeem Points
                                </button>
                                <button class="btn btn-outline" onclick="inviteFriends()">
                                    <i class="fas fa-user-plus"></i>
                                    Invite Friends
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Issues Tab -->
                <div class="tab-content" id="issues">
                    <div class="issues-header">
                        <h3>My Reported Issues</h3>
                        <div class="issues-filter">
                            <select id="issueStatusFilter">
                                <option value="all">All Statuses</option>
                                <option value="reported">Reported</option>
                                <option value="investigating">Investigating</option>
                                <option value="in-progress">In Progress</option>
                                <option value="resolved">Resolved</option>
                            </select>
                        </div>
                    </div>
                    <div class="my-issues-list" id="myIssuesList">
                        <!-- Issues will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Rewards Tab -->
                <div class="tab-content" id="rewards">
                    <div class="rewards-header">
                        <h3>Rewards & Points</h3>
                        <div class="points-summary">
                            <div class="points-card">
                                <h4>Available Points</h4>
                                <span class="points-number" id="availablePoints">1,250</span>
                                <p>Redeem for exciting rewards</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="rewards-grid">
                        <div class="reward-item">
                            <div class="reward-icon">
                                <i class="fas fa-subway"></i>
                            </div>
                            <h4>Metro Card</h4>
                            <p>Get metro card with 500 points</p>
                            <button class="btn btn-primary btn-sm" onclick="redeemReward('metro', 500)">
                                Redeem (500 pts)
                            </button>
                        </div>
                        <div class="reward-item">
                            <div class="reward-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <h4>Municipal Discount</h4>
                            <p>10% off on municipal services</p>
                            <button class="btn btn-primary btn-sm" onclick="redeemReward('discount', 200)">
                                Redeem (200 pts)
                            </button>
                        </div>
                        <div class="reward-item">
                            <div class="reward-icon">
                                <i class="fas fa-certificate"></i>
                            </div>
                            <h4>Certificate</h4>
                            <p>Community service certificate</p>
                            <button class="btn btn-primary btn-sm" onclick="redeemReward('certificate', 100)">
                                Redeem (100 pts)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content" id="settings">
                    <div class="settings-grid">
                        <div class="settings-card">
                            <h3>Account Settings</h3>
                            <form id="profileForm" class="settings-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="editFirstName">First Name</label>
                                        <input type="text" id="editFirstName" value="Rajesh">
                                    </div>
                                    <div class="form-group">
                                        <label for="editLastName">Last Name</label>
                                        <input type="text" id="editLastName" value="Kumar">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="editEmail">Email</label>
                                    <input type="email" id="editEmail" value="rajesh.kumar@email.com" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="editPhone">Phone</label>
                                    <input type="tel" id="editPhone" value="+91 98765 43210">
                                </div>
                                <div class="form-group">
                                    <label for="editCity">City</label>
                                    <select id="editCity">
                                        <option value="mumbai" selected>Mumbai, Maharashtra</option>
                                        <option value="delhi">Delhi, NCR</option>
                                        <option value="bangalore">Bangalore, Karnataka</option>
                                        <option value="hyderabad">Hyderabad, Telangana</option>
                                        <option value="chennai">Chennai, Tamil Nadu</option>
                                        <option value="kolkata">Kolkata, West Bengal</option>
                                        <option value="pune">Pune, Maharashtra</option>
                                        <option value="ahmedabad">Ahmedabad, Gujarat</option>
                                        <option value="jaipur">Jaipur, Rajasthan</option>
                                        <option value="lucknow">Lucknow, Uttar Pradesh</option>
                                    </select>
                                </div>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </form>
                        </div>

                        <div class="settings-card">
                            <h3>Notification Settings</h3>
                            <div class="notification-settings">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="emailNotifications" checked>
                                    <span class="checkmark"></span>
                                    Email notifications
                                </label>
                                <label class="checkbox-container">
                                    <input type="checkbox" id="smsNotifications">
                                    <span class="checkmark"></span>
                                    SMS notifications
                                </label>
                                <label class="checkbox-container">
                                    <input type="checkbox" id="issueUpdates" checked>
                                    <span class="checkmark"></span>
                                    Issue status updates
                                </label>
                                <label class="checkbox-container">
                                    <input type="checkbox" id="rewardAlerts" checked>
                                    <span class="checkmark"></span>
                                    Reward and point alerts
                                </label>
                                <label class="checkbox-container">
                                    <input type="checkbox" id="newsletter" checked>
                                    <span class="checkmark"></span>
                                    Newsletter and updates
                                </label>
                            </div>
                        </div>

                        <div class="settings-card">
                            <h3>Privacy & Security</h3>
                            <div class="privacy-settings">
                                <button class="btn btn-secondary" onclick="changePassword()">
                                    <i class="fas fa-key"></i>
                                    Change Password
                                </button>
                                <button class="btn btn-secondary" onclick="exportData()">
                                    <i class="fas fa-download"></i>
                                    Export My Data
                                </button>
                                <button class="btn btn-danger" onclick="deleteAccount()">
                                    <i class="fas fa-trash"></i>
                                    Delete Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Samadhan Kendra</h3>
                    <p>Empowering Indian citizens through AI-driven civic engagement and smart city solutions.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="index.html#report">Report Issue</a></li>
                        <li><a href="index.html#issues">View Issues</a></li>
                        <li><a href="index.html#leaderboard">Leaderboard</a></li>
                        <li><a href="index.html#about">About</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="help-center.html">Help Center</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="privacy-policy.html">Privacy Policy</a></li>
                        <li><a href="terms-of-service.html">Terms of Service</a></li>
                        <li><a href="rewards-program.html">Rewards Program</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Download App</h4>
                    <p>Get the Samadhan Kendra mobile app for better experience</p>
                    <div class="app-buttons">
                        <a href="#" class="app-btn">
                            <i class="fab fa-google-play"></i>
                            <span>Google Play</span>
                        </a>
                        <a href="#" class="app-btn">
                            <i class="fab fa-apple"></i>
                            <span>App Store</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Samadhan Kendra. Empowering India's Smart Cities.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Check if user is logged in
        if (!localStorage.getItem('userLoggedIn')) {
            window.location.href = 'login.html';
        }

        // Load user data
        function loadUserData() {
            const userEmail = localStorage.getItem('userEmail') || 'rajesh.kumar@email.com';
            const userPoints = localStorage.getItem('userPoints') || '1250';
            const userFirstName = localStorage.getItem('userFirstName') || 'Rajesh';
            const userLastName = localStorage.getItem('userLastName') || 'Kumar';
            const userCity = localStorage.getItem('userCity') || 'mumbai';

            document.getElementById('userFullName').textContent = `${userFirstName} ${userLastName}`;
            document.getElementById('userCity').textContent = getCityLabel(userCity);
            document.getElementById('userPoints').textContent = parseInt(userPoints).toLocaleString();
            document.getElementById('navUserPoints').textContent = parseInt(userPoints).toLocaleString();
            document.getElementById('availablePoints').textContent = parseInt(userPoints).toLocaleString();
            
            document.getElementById('editFirstName').value = userFirstName;
            document.getElementById('editLastName').value = userLastName;
            document.getElementById('editEmail').value = userEmail;
            document.getElementById('editCity').value = userCity;
        }

        // Get city label
        function getCityLabel(city) {
            const cityLabels = {
                'mumbai': 'Mumbai, Maharashtra',
                'delhi': 'Delhi, NCR',
                'bangalore': 'Bangalore, Karnataka',
                'hyderabad': 'Hyderabad, Telangana',
                'chennai': 'Chennai, Tamil Nadu',
                'kolkata': 'Kolkata, West Bengal',
                'pune': 'Pune, Maharashtra',
                'ahmedabad': 'Ahmedabad, Gujarat',
                'jaipur': 'Jaipur, Rajasthan',
                'lucknow': 'Lucknow, Uttar Pradesh'
            };
            return cityLabels[city] || city;
        }

        // Mobile Navigation Toggle
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
        });

        // Close mobile menu when clicking on a link
        document.querySelectorAll('.nav-link').forEach(n => n.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        });

        // Profile dropdown toggle
        function toggleProfileMenu() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('active');
        }

        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all tabs
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab
                btn.classList.add('active');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });

        // Profile form handling
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const firstName = document.getElementById('editFirstName').value;
            const lastName = document.getElementById('editLastName').value;
            const phone = document.getElementById('editPhone').value;
            const city = document.getElementById('editCity').value;
            
            // Update localStorage
            localStorage.setItem('userFirstName', firstName);
            localStorage.setItem('userLastName', lastName);
            localStorage.setItem('userCity', city);
            
            // Update display
            document.getElementById('userFullName').textContent = `${firstName} ${lastName}`;
            document.getElementById('userCity').textContent = getCityLabel(city);
            
            alert('Profile updated successfully!');
        });

        // Logout function
        function logout() {
            localStorage.removeItem('userLoggedIn');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('userPoints');
            localStorage.removeItem('userFirstName');
            localStorage.removeItem('userLastName');
            localStorage.removeItem('userCity');
            
            window.location.href = 'index.html';
        }

        // Utility functions
        function editAvatar() {
            alert('Avatar editing feature coming soon!');
        }

        function editProfile() {
            document.querySelector('[data-tab="settings"]').click();
        }

        function reportNewIssue() {
            window.location.href = 'index.html#report';
        }

        function viewLeaderboard() {
            window.location.href = 'index.html#leaderboard';
        }

        function redeemRewards() {
            document.querySelector('[data-tab="rewards"]').click();
        }

        function inviteFriends() {
            alert('Invite friends feature coming soon!');
        }

        function redeemReward(type, points) {
            const currentPoints = parseInt(localStorage.getItem('userPoints') || '1250');
            if (currentPoints >= points) {
                const newPoints = currentPoints - points;
                localStorage.setItem('userPoints', newPoints.toString());
                
                // Update display
                document.getElementById('userPoints').textContent = newPoints.toLocaleString();
                document.getElementById('navUserPoints').textContent = newPoints.toLocaleString();
                document.getElementById('availablePoints').textContent = newPoints.toLocaleString();
                
                alert(`Successfully redeemed ${type} reward!`);
            } else {
                alert('Insufficient points. Keep reporting issues to earn more!');
            }
        }

        function changePassword() {
            alert('Password change feature coming soon!');
        }

        function exportData() {
            alert('Data export feature coming soon!');
        }

        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                logout();
            }
        }

        // Load user data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
        });
    </script>
</body>
</html>
